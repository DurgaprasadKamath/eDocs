<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>eDocs - Log In</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', path='/images/file-circle-check-solid.svg') }}"
    />
    <link rel="stylesheet" href="/static/css/style.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
      integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <div class="login-main">
      <div class="login-container">
        <div class="block1">
          <p id="logoTxt">eDocs</p>
          <div class="txtBlock">
            <p id="loginTxt">Log In to your Account</p>
            <p id="blueTxt">
              Securely manage official college documents.<br />Built for
              verified records and trusted workflows.
            </p>
          </div>
          <p id="troubleTxt">
            Having trouble? <a href="/contact_office">Contact Office Staff</a>
          </p>
        </div>
        <div class="block2">
          <form action="/login" method="post" id="loginForm">
            <div class="input-block">
              <p id="label">College Email</p>
              <div
                class="input-field"
                id="emailBlock"
                {%
                if
                emailError
                %}
                style="box-shadow: 0px 0px 0px 1px #da1e37"
                {%
                endif
                %}
              >
                <input
                  type="text"
                  name="identifier"
                  id="emailInput"
                  value="{{enteredIdentifier or ''}}"
                  placeholder="Email or Identification Number"
                  required
                />
              </div>
              {% if emailError %}
              <p id="emailErrorTxt">
                <i class="fa-solid fa-circle-exclamation"></i>Account does not
                exists!
              </p>
              {% endif %}
            </div>
            <div class="input-block">
              <p id="label">Password</p>
              <div
                class="input-field"
                id="passwordBlock"
                {%
                if
                passwordError
                %}
                style="box-shadow: 0px 0px 0px 1px #da1e37"
                {%
                endif
                %}
              >
                <input
                  type="password"
                  name="password"
                  value="{{enteredPassword or ''}}"
                  id="passwordTxt"
                  placeholder="Password Here"
                  required
                />
                <button type="button" id="togglePassword">
                  <i id="eyeIcon" class="fa-solid fa-eye-slash"></i>
                </button>
              </div>
              <div class="password-end">
                {% if passwordError %}
                <p id="passwordErrorTxt">
                  <i class="fa-solid fa-circle-exclamation"></i>Incorrect
                  Password!
                </p>
                {% endif %}
                <a href="/forgot-password">Forgot Password?</a>
              </div>
            </div>
            <button type="submit">
              <div
                class="spinner-border"
                style="display: none"
                id="spinner"
                role="status"
              >
                <span class="visually-hidden">Loading</span>
              </div>
              <span id="submitTxt">Log In</span>
            </button>
          </form>
          <p id="setPassTxt">
            <a href="/set-password/email">Set Password</a> - New Account Setup
          </p>
          <p id="authUserTxt">For authorized College Users Only</p>
        </div>
      </div>
    </div>
  </body>
  <script>
    const passwordTxt = document.getElementById("passwordTxt");
    const eyeIcon = document.getElementById("eyeIcon");

    document.getElementById("togglePassword").addEventListener("click", () => {
      if (passwordTxt.type === "password") {
        passwordTxt.type = "text";
        eyeIcon.classList.remove("fa-eye-slash");
        eyeIcon.classList.add("fa-eye");
      } else {
        passwordTxt.type = "password";
        eyeIcon.classList.remove("fa-eye");
        eyeIcon.classList.add("fa-eye-slash");
      }
    });

    const loginForm = document.getElementById("loginForm");
    const submitTxt = document.getElementById("submitTxt");
    const spinner = document.getElementById("spinner");

    document
      .getElementById("loginForm")
      .addEventListener("submit", function (e) {
        e.preventDefault();

        spinner.style.display = "inline-block";
        submitTxt.style.display = "none";

        setTimeout(() => {
          spinner.style.display = "none";
          submitTxt.style.display = "inline";
          this.submit();
        }, 800);
      });

    const emailBlock = document.getElementById("emailBlock");
    const emailInput = document.getElementById("emailInput");
    const passwordBlock = document.getElementById("passwordBlock");
    const emailErrorTxt = document.getElementById("emailErrorTxt");
    const passwordErrorTxt = document.getElementById("passwordErrorTxt");

    emailInput.addEventListener("input", function () {
      if (emailInput.value != "{{enteredEmail}}") {
        emailBlock.style.boxShadow = "none";
        emailErrorTxt.style.display = "none";
      } else {
        emailBlock.style.boxShadow = "0px 0px 0px 1px #da1e37";
        emailErrorTxt.style.display = "block";
      }
    });

    passwordTxt.addEventListener("input", function () {
      if (passwordTxt.value != "{{enteredPassword}}") {
        passwordBlock.style.boxShadow = "none";
        passwordErrorTxt.style.display = "none";
      } else {
        passwordBlock.style.boxShadow = "0px 0px 0px 1px #da1e37";
        passwordErrorTxt.style.display = "block";
      }
    });
  </script>
</html>
